# ‚ö° TaskForge JavaScript Architecture

–ú–æ–¥—É–ª—å–Ω–∞—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã–º –ø–æ–¥—Ö–æ–¥–æ–º.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤

```
js/
‚îú‚îÄ‚îÄ main.js                      # –ì–ª–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ websocket-notifications.js   # WebSocket –∫–ª–∏–µ–Ω—Ç –¥–ª—è real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îú‚îÄ‚îÄ notification.js              # –°–∏—Å—Ç–µ–º–∞ desktop —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (Notification API)
‚îÇ
‚îú‚îÄ‚îÄ components/                  # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ calendar-habits.js       # –ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø—Ä–∏–≤—ã—á–µ–∫ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Å—Ç–∞—Ç—É—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ calendar.js              # –ë–∞–∑–æ–≤—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å (–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–µ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ habit-checkbox.js        # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —á–µ–∫–±–æ–∫—Å–æ–≤ –ø—Ä–∏–≤—ã—á–µ–∫
‚îÇ   ‚îú‚îÄ‚îÄ index-subgoals.js        # –ü–æ–¥—Ü–µ–ª–∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
‚îÇ   ‚îú‚îÄ‚îÄ modal.js                 # –ë–∞–∑–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
‚îÇ   ‚îú‚îÄ‚îÄ notification.js          # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ progress-text.js         # –¢–µ–∫—Å—Ç–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ stats-dashboard.js       # –î–∞—à–±–æ—Ä–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–∫—Ä—É–≥–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ subgoal.js               # –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–¥—Ü–µ–ª–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ü–µ–ª–µ–π
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ modals/                  # –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
‚îÇ       ‚îú‚îÄ‚îÄ 2fa-modal.js         # –î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ auth-modal.js        # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ base-modal.js        # –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –º–æ–¥–∞–ª–µ–π
‚îÇ       ‚îú‚îÄ‚îÄ create-modal.js      # –°–æ–∑–¥–∞–Ω–∏–µ —Ü–µ–ª–µ–π –∏ –ø—Ä–∏–≤—ã—á–µ–∫
‚îÇ       ‚îú‚îÄ‚îÄ dropdown-modal.js    # Dropdown —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å mark-as-read
‚îÇ       ‚îî‚îÄ‚îÄ support-modal.js     # –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∏
‚îÇ
‚îú‚îÄ‚îÄ pages/                       # –õ–æ–≥–∏–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
‚îÇ   ‚îú‚îÄ‚îÄ goals.js                 # –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ü–µ–ª–µ–π (CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏)
‚îÇ   ‚îú‚îÄ‚îÄ habits.js                # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–∏–≤—ã—á–µ–∫ (—á–µ–∫–∏–Ω—ã, streak)
‚îÇ   ‚îî‚îÄ‚îÄ statistics.js            # –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–≥—Ä–∞—Ñ–∏–∫–∏)
‚îÇ
‚îú‚îÄ‚îÄ utils/                       # –£—Ç–∏–ª–∏—Ç—ã –∏ —Ö–µ–ª–ø–µ—Ä—ã
    ‚îî‚îÄ‚îÄ templates.js             # –®–∞–±–ª–æ–Ω—ã –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ HTML
```

## üîß –ö–ª—é—á–µ–≤—ã–µ –º–æ–¥—É–ª–∏

### main.js
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–ª–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

```javascript
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
document.addEventListener('DOMContentLoaded', () => {
    initNotificationCenter();
    initWebSocket();
    initCurrentPage();
});
```

**–§—É–Ω–∫—Ü–∏–∏:**
- `initNotificationCenter()` - –∑–∞–ø—É—Å–∫ WebSocket –∏ —Ü–µ–Ω—Ç—Ä–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `initCurrentPage()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `setupGlobalEventListeners()` - –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π

---

### websocket-notifications.js
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** Real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ WebSocket (Django Channels).

```javascript
const ws = new WebSocket(`ws://${window.location.host}/ws/notifications/`);

ws.onmessage = (event) => {
    const data = JSON.parse(event.data);
    displayNotification(data);
    updateBadge();
};
```

**–§—É–Ω–∫—Ü–∏–∏:**
- `connectWebSocket()` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- `displayNotification(data)` - –ø–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ dropdown
- `updateBadge()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
- `reconnectWithBackoff()` - –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π

**–°–æ–±—ã—Ç–∏—è:**
- `open` - —É—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- `message` - –Ω–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- `close` - —Ä–∞–∑—Ä—ã–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (–∞–≤—Ç–æ—Ä–µ–∫–æ–Ω–Ω–µ–∫—Ç)
- `error` - –æ—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

---

### components/stats-dashboard.js
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–∫—Ä—É–≥–∞–º–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –Ω–∞ –≥–ª–∞–≤–Ω–æ–π.

```javascript
// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—Ä—É–≥–æ–≤—ã—Ö –ø—Ä–æ–≥—Ä–µ—Å—Å-–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
updateProgressCircles() {
    updateDailyProgressCircle();    // –ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞ –¥–µ–Ω—å
    updateMonthlyProgressCircle();  // –ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞ –º–µ—Å—è—Ü
}
```

**–§—É–Ω–∫—Ü–∏–∏:**
- `updateDailyProgressCircle()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–Ω–µ–≤–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- `updateMonthlyProgressCircle()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Å—è—á–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- –°–∏—Å—Ç–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ API –∑–∞–ø—Ä–æ—Å–æ–≤
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏ —Å –ø–ª–∞–≤–Ω—ã–º–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏

---

### components/modals/dropdown-modal.js
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** Dropdown –º–µ–Ω—é —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å mark-as-read.

```javascript
function markAsRead(notificationId) {
    // Fetch POST –∑–∞–ø—Ä–æ—Å
    fetch(`/notifications/mark-read/${notificationId}/`, {
        method: 'POST',
        headers: { 'X-CSRFToken': getCSRFToken() }
    });
    
    // –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞—Ç–µ–º–Ω–µ–Ω–∏—è
    notificationItem.classList.add('read');
    indicator.style.opacity = '0';
    indicator.style.transform = 'scale(0)';
    
    // –£–¥–∞–ª–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ —á–µ—Ä–µ–∑ 300ms
    setTimeout(() => indicator.remove(), 300);
}
```

**–§—É–Ω–∫—Ü–∏–∏:**
- `toggleDropdown()` - –æ—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ dropdown
- `markAsRead(id)` - –æ—Ç–º–µ—Ç–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º
- `markAllAsRead()` - –æ—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º–∏
- `loadNotifications()` - –∑–∞–≥—Ä—É–∑–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å —Å–µ—Ä–≤–µ—Ä–∞

---

### components/calendar-habits.js
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫.

```javascript
function renderCalendar(year, month, habitsData) {
    const calendar = generateCalendarGrid(year, month);
    
    // –û—Ç–º–µ—Ç–∫–∞ –¥–Ω–µ–π —Å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –ø—Ä–∏–≤—ã—á–∫–∞–º–∏
    habitsData.forEach(day => {
        if (day.allCompleted) {
            markDayComplete(day.date);
        } else if (day.someCompleted) {
            markDayPartial(day.date);
        }
    });
}
```

**–§—É–Ω–∫—Ü–∏–∏:**
- `preloadHabitsData()` - –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
- `loadHabitsCompletionHistory()` - –∑–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- `updateCalendarMarks()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–º–µ—Ç–æ–∫ –Ω–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ
- –°–∏—Å—Ç–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å Promise –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

**–ö–ª–∞—Å—Å—ã –¥–Ω–µ–π:**
- `.habits-completed` - –≤—Å–µ –ø—Ä–∏–≤—ã—á–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã (–∑–µ–ª—ë–Ω—ã–π)
- `.habits-partial` - –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã (–∂—ë–ª—Ç—ã–π)
- `.today` - —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å
- `.other-month` - –¥–Ω–∏ –¥—Ä—É–≥–æ–≥–æ –º–µ—Å—è—Ü–∞

---

### components/index-subgoals.js
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥—Ü–µ–ª—è–º–∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ.

```javascript
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥—Ü–µ–ª–µ–π
initIndexSubgoalHandlers() {
    applySubgoalCompletionStyle();  // –í–∏–∑—É–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
    updateGoalProgressLocal();       // –õ–æ–∫–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
    addSubgoalClickHandler();        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∏–∫–æ–≤
}
```

**–§—É–Ω–∫—Ü–∏–∏:**
- `initIndexSubgoalHandlers()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- `applySubgoalCompletionStyle()` - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
- `updateGoalProgressLocal()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –±–µ–∑ –∑–∞–ø—Ä–æ—Å–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É
- `addSubgoalClickHandler()` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π

---

### utils/templates.js
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML —à–∞–±–ª–æ–Ω–æ–≤ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

---

## üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Å—Ç—Ä–∞–Ω–∏—Ü—ã

```
1. main.js: DOMContentLoaded
   ‚Üì
2. initNotificationCenter()
   ‚îú‚îÄ‚îÄ connectWebSocket()
   ‚îî‚îÄ‚îÄ loadUnreadNotifications()
   ‚Üì
3. initCurrentPage()
   ‚îú‚îÄ‚îÄ goals.js (–µ—Å–ª–∏ /goals/)
   ‚îú‚îÄ‚îÄ habits.js (–µ—Å–ª–∏ /habits/)
   ‚îî‚îÄ‚îÄ statistics.js (–µ—Å–ª–∏ /statistics/)
   ‚Üì
4. setupGlobalEventListeners()
   ‚îú‚îÄ‚îÄ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
   ‚îú‚îÄ‚îÄ dropdown –º–µ–Ω—é
   ‚îî‚îÄ‚îÄ –∫–Ω–æ–ø–∫–∏ navbar
```

## üì° WebSocket –ø—Ä–æ—Ç–æ–∫–æ–ª

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
```javascript
ws://localhost:8000/ws/notifications/
```

### –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π
```json
{
    "type": "notification",
    "id": 123,
    "message": "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ —Ü–µ–ª–∏ '–í—ã—É—á–∏—Ç—å Python'",
    "created_at": "2025-01-15T10:30:00Z",
    "is_read": false,
    "link": "/goals/42/"
}
```

### –°–æ–±—ã—Ç–∏—è
- `connection_established` - —É—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- `notification` - –Ω–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- `mark_read` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–æ

## üéØ API endpoints

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `GET /notifications/latest/` - –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `POST /notifications/mark-read/<id>/` - –æ—Ç–º–µ—Ç–∏—Ç—å –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º
- `POST /notifications/mark-all-read/` - –æ—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ

### –ü—Ä–∏–≤—ã—á–∫–∏
- `POST /habits/checkin/<id>/` - –æ—Ç–º–µ—Ç–∏—Ç—å –ø—Ä–∏–≤—ã—á–∫—É –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π
- `GET /habits/calendar/<id>/` - –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è

### –¶–µ–ª–∏
- `GET /goals/` - —Å–ø–∏—Å–æ–∫ —Ü–µ–ª–µ–π
- `POST /goals/create/` - —Å–æ–∑–¥–∞—Ç—å —Ü–µ–ª—å
- `PUT /goals/<id>/update/` - –æ–±–Ω–æ–≤–∏—Ç—å —Ü–µ–ª—å
- `DELETE /goals/<id>/delete/` - —É–¥–∞–ª–∏—Ç—å —Ü–µ–ª—å

## üõ†Ô∏è –£—Ç–∏–ª–∏—Ç—ã

### utils/templates.js
–®–∞–±–ª–æ–Ω—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ HTML —Ä–∞–∑–º–µ—Ç–∫–∏ —Ü–µ–ª–µ–π, –ø—Ä–∏–≤—ã—á–µ–∫ –∏ –¥—Ä—É–≥–∏—Ö –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.

### CSRF —Ç–æ–∫–µ–Ω
```javascript
// –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –∏–∑ cookies
function getCSRFToken() {
    return document.querySelector('[name=csrfmiddlewaretoken]').value;
}

fetch('/api/endpoint/', {
    method: 'POST',
    headers: { 'X-CSRFToken': getCSRFToken() }
});
```

## üì± Notification API

### Desktop —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```javascript
// notification.js
if (Notification.permission === 'granted') {
    new Notification('TaskForge', {
        body: '–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ —Ü–µ–ª–∏!',
        icon: '/static/img/logo.png',
        tag: 'goal-reminder-42'
    });
}
```

## ‚ú® Best Practices

1. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –û–¥–∏–Ω —Ñ–∞–π–ª = –æ–¥–Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
2. **Async/Await**: –ò—Å–ø–æ–ª—å–∑—É–π –≤–º–µ—Å—Ç–æ callback hell
3. **Error handling**: –í—Å–µ–≥–¥–∞ –æ–±–æ—Ä–∞—á–∏–≤–∞–π fetch –≤ try/catch
4. **CSRF**: –ù–µ –∑–∞–±—ã–≤–∞–π —Ç–æ–∫–µ–Ω –≤ POST/PUT/DELETE –∑–∞–ø—Ä–æ—Å–∞—Ö
5. **Event delegation**: –ò—Å–ø–æ–ª—å–∑—É–π –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
6. **Cleanup**: –£–¥–∞–ª—è–π event listeners –ø—Ä–∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

**–í–µ—Ä—Å–∏—è:** 2.0.0  
**WebSocket:** Django Channels 4.3.1  
**–û–±–Ω–æ–≤–ª–µ–Ω–æ:** –ù–æ—è–±—Ä—å 2025
